# 计算机网络总结：

1.TCP和UDP区别？

TCP面向连接的可靠字节流的可靠传输，在收发数据前需要通过三次握手建立连接，适应ACK对收发的数据进行正确性检验。而UDP无连接协议，不管对方有没有收到或者收到的数据是否正确，不可靠。

TCP提供流量控制和拥塞控制，而UDP没有。

TCP对系统资源要求高于UDP，所以速度也比UDP慢。

TCP数据包没有边界，会出现粘包问题，UDP包是独立的，不会出现粘包问题。

在应用层面上，若注重数据正确性和完整性使用TCP，当要求性能和速度的时候，使用UDP更加合适。

单凭TCP是不能保证完整性的，若有伪造TCP包，无法识别。

2.哪些协议用了TCP，UDP？应用场景？

TCP：HTTP，telnet，ssh，SMTP，FTP。

UDP：DNS（可TCP可UDP），RIP，DHCP，SNTP。

3.TCP为什么是可靠连接？

通信前先建立连接，有拥塞控制，流量控制，按序到达。

4.典型网络模型有哪几种？

OSI七层，TCP/IP4层

物理层（集线器），数据链路层（交换机），网络层（路由器），传输层，会话层，表示层，应用层。（物联网淑惠示用）

数据链路层，网际层，传输层，应用层。

5.TCP（UDP,IP）等首部构成？

TCP头部：源端口，目的端口，序列号，确认号，偏移位，标志位，校验和等等（20字节）

UDP头部：源端口，目的端口，长度，校验和。（8字节）

IP头部：源IP，目的IP地址，协议，校验和，总长度。（20字节）

6.HTTP/1.0，HTTP/1.1，HTTP/2.0区别？

HTTP协议老的标准时HTTP/1.0，目前最常用的是HTTP/1.1。

HTTP/1.1加入长连接字段，默认Connection:keep-alive。减少建立和关闭连接的消耗和延迟。

7.URI（统一资源标识符）和URL（统一资源定位符）区别？

8.什么是三次握手，四次挥手？

三次握手指的是客户端和服务器建立连接过程中一共涉及有3次报文交换。

第一次握手：客户端给服务器发送连接请求报文，报文标志位SYN=1，client_seq=x(随机初始值)，发送后处于SYN_SENT状态；

第二次握手：服务器接收到请求后，分配资源，同时给客户端返回一个ack报文，其中标志位SYN=1,ACK=1，而ack序列为x+1，同时产生一个seq=y；服务器位于SYN-RCVD状态；

第三次握手：客户端收到服务器发送的ack信息后，返回给服务器一个ack=y+1,seq=x+1报文，同时标志位ACK=1。完成三次握手后建立连接。此时通信双方进入ESTABLISHED状态。

四次挥手：（优雅关闭）通信双方断开连接过程共涉及四次报文交换。

第一次挥手：客户端没有数据要发送给服务器的了，会给服务器发送一个FIN报文，但此时服务器还可能继续给客户端发送数据，客户端进入FIN_WAIT_1；

第二次挥手：当服务器收到客户端FIN后，服务器返回一个ACK告诉客户端自己收到FIN，ack=seq+1；服务器进入CLOSE_WAIT，客户端进入FIN_WAIT_2;

第三次挥手：服务器发送完数据后，给客户端发送一个FIN报文，告诉客户端自己要关闭连接，服务器进入LAST_ACK状态，等待客户端最后的ACK；

第四次挥手：客户端接收到FIN后，对消息进行确认，给服务器发送ACK消息，但是它怕服务器收不到消息，进入TIME_WAIT状态（2MSL），超时后重新传送，服务器接收到ACK后，正式关闭TCP连接，处于CLOSED状态，而客户端等了2MSL后还没消息，它直到服务器已经关闭，于是自己也断开；

9.为什么三次握手？两次行么？三次挥手行么？

三次握手两个原因：确认通信双方同时具有发送消息和接收消息的能力；保证请求连接失败的报文从网络中消失；三次挥手不行，因为建立连接时没有数据传输，但是断开连接时有双方数据传输。

10.为什么服务端容易收到SYN攻击？

黑客伪造大量的SYN请求发送给服务器，服务器立即确认并分配资源，但是这一系列连接并不真实存在的，浪费了大量服务器资源，并且阻塞了正常用户的连接请求，也称SYN泛洪攻击。第二种是服务器返回给客户端的ACK数据包在传输过程中丢失，而客户端没有收到该ACK数据包而拒绝接收服务器接下来发送的数据，服务器一直在发送，客户端一直在拒绝，形成死锁。

11.为什么客户端要有TIME_WAIT，2MSL？

TIME_WAIT是在四次挥手过程中客户端接受了服务器的FIN报文并发送ACK给服务器后，自己仍需要等待2MSL时间。理论上四个报文都发送完毕可以直接进入CLOSED状态，但是实际上网络是不可靠的，有可能最后一个ACK丢失没有到达服务器，若客户端发送的ACK丢失，服务器会再次重新发送FIN给客户端，所以TIME_WAIT状态就是可用来重发丢失的ACK报文。

12.最新的HTTP协议种将服务器IP端口号和客户端IP和端口号统一为connectionID作用？

用于连接复用，一个TCP连接可以处理多个HTTP请求。

13.linux硬盘格式化步骤？

14.HTTP请求报文和相应报文？

请求报文：请求行（request line），请求头（header），空行和请求数据（请求报文体实体，GET无此部分，POST包含）四个部分。

```
GET /URI HTTP/1.1
Host:xxxx.com
User-Agent:Mozilla/5.0(windows NT 10.0;WOW64)
Accept:html/text
Accept-Encoding:gzip
Accept-Language:zh-CN,zh
空行
请求数据实体

POST / HTTP/1.1
Host:xxxx.com
User-Agent:Mozilla/5.0
Content-Type:application/x-www-form-urlencoded
Content-Length:40
Connection:Keep-Alive
空行
name=username&passwd=12345
```

响应报文：HTTP响应报文也是四个部分：状态行，消息报头，空行和响应正文

```
HTTP/1.1	200 OK
Date:Fri,22 Mayxxxxxxxx
Content-Type: text/html;charset=UTF-8
空行
<html>
    <head></head>
    <body>
            <!--body goes here-->
	</body>
</html>

```

15.HTTP状态码和状态短语？

1xx：指示信息，表示请求已接受，需要继续处理

2xx：成功，请求正常处理完毕。

+ 200 OK，客户端请求被正常处理
+ 206 Partial content：客户端进行了范围请求

3xx：重定向--要完成请求必须进行更进一步的操作

+ 301 Moved Permanently：永久重定向，该资源已经被永久移动到新位置，将来任何对该资源的访问都要使用本响应返回的若干个URI之一。
+ 302 Found：临时重定向，请求的资源限制临时从不同的URI中获得

4xx：客户端错误--请求语法错误，或者服务器无法处理请求

+ 400 Bad Request：请求报文存在语法错误
+ 403 Forbidden：请求被服务器拒绝
+ 404 Not Found：请求不存在，服务器上找不到请求的资源

5xx：服务端错误--服务器处理请求出错

+ 500 Internal Server Error：服务器指向请求时出错
+ 502 Bad Gateway：无响应网关/代理
+ 503 Service Unavailable：服务器过载或者拒绝某些客户端连接

16.HTTP请求报文解析？有哪些开源的解析库？(http_parser)

HTTP报文中，每一行数据由\r\n作为结束字符，空行则仅仅有\r\n，因此，可通过查找字符\r\n将报文拆成单独行进行解析。

17.建立TCP连接涉及的系统调用？

客户端：主动连接。socket(), connect(), send(), recv()

服务端：被动连接。socket(), bind(), listen(), accept(), recv(), send(), close(), shutdown()

客户端无需绑定本地端口号，直接connetc目标地址和端口；在connect()之后，为SYN_RCVD状态，服务端listen(fd, backlog)，backlog监听队列长度，包括已建立三次握手连接和未建立连接的队列。在accept()之后返回一个新的fd才真正三次握手建立连接。服务器读写在accept之后返回的fd上进行。

18.close是一次就直接关闭连接吗？半连接怎么产生的？

close(fd)是将fd的引用计数减一，为0时关闭连接，shutdown直接关闭连接。

+ 半连接，半打开，半关闭？
+ 半连接定义：发发生在TCP3次握手中，A向B发起TCP请求，B也按照正常情况响应了，但是A不进行第三次握手，这就是半连接状态。【半连接攻击：造成B分配的内存资源一直被耗着，直到资源耗尽。】
+ 半打开：若一方已经关闭或者异常终止连接，而另一方却不知道，这样的TCP连接称为半打开。
+ 半关闭：TCP四次挥手过程中，TCP一端在结束它的发送后还能接收来自另一端传输的数据的能力，称为半关闭。【半关闭产生：1.客户端发送FIN，另一端发送对这个FIN的ACK报文段，此时客户端就处于半关闭；2.调用shutdown，shutdown第二个参数为SHUT_WR时，为半关闭。



19.集线器，中继器，双绞线；网桥，以太网交换机，网卡；路由器，三层交换机，四层交换机，网桥工作在OSI模型哪一层？

物理层：集线器，中继器，双绞线；

数据链路层：网桥，以太网交换机，网卡（一半物理层，一半数据链路层）

网络层：路由器，三层交换机；

传输层：四层交换机（常用作负载均衡），网桥：对高层协议（传输层及更高）进行转换的网间连接器。

20.网络层作用？协议的了解？

将分组从一台主机转移到另一台主机，从而提供了主机到主机之间的通信服务和各种形式的进程到进程的通信，分组转发和寻路。IP协议，TCMP协议。

路由协议：内部网关协议IGP包括RIP，OSPF，和外部网关协议EGP和BGP。

RIP（Route inoformation Protocol）路由信息协议：主要传递路由信息，每隔30秒广播一个路由表，维护相邻路由器的位置关系，同时根据收到的路由表信息使用动态规划的方式计算自己的路由表信息。RIP是一个距离矢量路由协议，最大跳数为16跳，16跳以及超过16跳的网络认为目标网络不可达。

OSPF：

21.UDP如何实现可靠传输？

因为UDP是无连接的协议，所以在传输层上无法保证可靠传输，要想实现可靠传输，只能从应用层实现，需要实现seq/ack机制，重传机制和窗口确认机制。需要接收放收到UDP后回复个确认包，发送方有个机制，收不到确认包就要重新发送，每个包又递增的序列号，接收方发现中间丢了包就要发送重传请求，当网络太差时频繁丢包，防止丢包越严重越重传的恶性循环，要有个发送窗口的限制，发送窗口的大小根据网络传输情况调整，调整算法又一定自适应性。

+ UDP如何实现一对多通信？
+ 广播和多播（组播）。socket()设置为SOCK_DGRAM，设置setsockopt()将描述符设置为BROADCAST；addr设置为广播地址255.255.255.255；然后sendto；和recvfrom。

22.浏览器输入URL后执行过程？

（1）域名解析，客户端使用DNS协议将URL解析为对应的IP地址；

（2）建立TCP连接，客户端和服务器通过三次握手建立TCP连接；

（3）HTTP连接，客户端向服务器发送HTTP请求，HTTP无需额外连接，直接通过已经建立的TCP连接发送；

（4）服务器对客户端发送的HTTP请求处理，返回响应；

（5）客户端接收到HTTP响应，将结果渲染展示给用户。

23.网页解析过程与实现方法？

（1）首先HTML文档解析，浏览器将HTML文档生成解析树，也就是DOM树，它由DOM元素以及属性节点组成；

（2）然后浏览器加载过程中遇到了CSS文件或者图片资源，还会发送请求来获取CSS文件和资源，这个请求通常是异步的，不会影响HTML文档的加载；

（3）不过如果浏览器在加载时遇到了js文件，则会挂起渲染的线程，等待js文件加载解析完毕才恢复HTML的渲染线程；

（4）最后时CSS解析，将CSS文件解析为样式表对象来渲染DOM树。

24.网络层分片的原因与具体实现方法？

因为在数据链路层中帧的大小通常有限制，比如在以太网中帧的最大大小(MTU)是1500字节。如果IP数据包加上头部后大小超过1500字节，就需要分片。

IP分片和完整IP报文差不多用于相同的IP头，16位ID域对于每隔分片都是一致的，这样才能在重写组装的时候识别处理自同一个IP报文的分片。在IP头里面，16位识别号唯一记录了一个IP包的ID，具有同一个ID的IP分片将会重新组装，而13位片偏移则记录了某IP片相对整个包的位置；而这两个表中间的3位标志则记录该分片后面是否有新的分片。这三个标志组成了IP分片的所有信息，接收方可利用这些信息对IP数据进行重新组织。

25.TCP怎么保证可靠性？

（校序重流拥）

（1）校验和：发送的数据包的二进制相加然后取反，目的是检测数据在传输过程中的任何变化。如果收到段的检验和有差错，TCP将丢弃这个报文段和不确认收到此报文段。

（2）确认应答+序列号：TCP给发送的每一个包进行编号，接收方对数据包进行排序，把有序数据传送给应用层。

（3）超时重传：当TCP发出一个报文段后，启动一个定时器，等待目的端口确认收到这个报文段。如果不能即时收到一个确认，将重发这个报文段。

（4）流量控制：TCP连接的每一方都有固定大小的缓冲空间，TCP的接收端只允许发送端发送接收端缓冲区能够接纳的数据。当接收方来不及处理发送方的数据时，能提示发送方降低发送速率，防止包丢失。TCP使用的流量控制协议是可变大小的滑动窗口协议。接收方有即时窗口（滑动窗口），随ACK报文发送。

（5）拥塞控制：当网络拥塞时，减少数据的发送。发送方有拥塞窗口，发送数据前比对接收方发过来的即时窗口，取小。

慢启动，拥塞避免，快速重传，快速恢复。

26.流量控制的介绍，采用滑动窗口有什么问题？

流量控制就是让发送方发送速率不要过快，让接收方来得及接收。利用TCP报文段中的窗口大小字段来控制发送方的发送窗口不大于接收方的返回窗口大小就可实施流量控制。

考虑特殊情况，接收方若没有足够缓存使用，就会发送零窗口大小的报文，此时发送方将发送窗口设置为0，停止发送数据。之后接收方有足够的缓存，发送了非零窗口大小的报文，但是这个报文在中途丢失的，那么发送方的发送窗口就一直为0导致死锁。

解决这个问题：TCP为每一个连接设置一个持续计时器。只要TCP的一方接收到对方的零窗口通知，就启动该计时器，周期性的发送一个零窗口探测报文段。对方就在确认这个报文段的时候给出现在的窗口大小（注：TCP规定，即使设置为0窗口，也必须接收以下几种报文段：零窗口探测报文段，确认报文段和携带紧急数据的报文段）。

27.TCP滑动窗口协议简介？

TCP的滑动窗口机制用于控制接收方和发送方的发送速率，避免拥塞的发生。滑动窗口其实就是接收端的缓冲区大小，用来告诉发送方对它发送的数据有多大的缓冲空间。在接收方的滑动窗口已知的情况下，当接收方确认了连续的数据序列之后，发送方的滑动窗口向后滑动，发送下一个数据序列。接收方会在每一个ACK数据包中附带自己当前的接受窗口（滑动窗口）的大小，方便发送方进行控制。

+ 拥塞窗口和滑动窗口区别？
+ 一个防止流量注入网络，一个防止流量过大，接收方来不及接收。

28.拥塞控制和流量控制区别？

拥塞控制是防止过多的数据注入网络中，导致网络发生拥塞；流量控制是为了防止发送方一下子发送过多的数据到接收方，导致接收方缓存放不下。两种算法都是对发送方的行为进行控制的。

29.TCP拥塞控制算法名字？

拥塞控制目的也是控制发送者的流量，拥塞控制算法有四种：慢启动，拥塞避免，快速重传，快速恢复。

（1）慢启动：慢启动算法的思路是当主机开始发送数据时，先以比较小的拥塞窗口进行发送，然后每次翻倍，也就是说，由小到大逐渐增加拥塞窗口的大小，而这个大小是指数增长的即1，2，4，8，16；为了防止拥塞窗口cwnd增长过大引起网络拥塞，还要设置一个慢启动阈值ssthresh状态变量，当拥塞窗口的大小超过慢启动阈值的时候（cwnd>ssthresh），停止使用慢开始算法而改用拥塞避免算法；

（2）拥塞避免：拥塞避免算法的思路是让拥塞窗口cwnd缓慢地增大，即没经过一个往返时间RTT就把发送方的拥塞窗口cwnd加1，而不是加倍；

（3）快速重传：当发送端连续收到三个重复的ack时，表示该数据段已经丢失，需要重新发送。此时慢启动阈值ssth变为原来的一半，拥塞窗口cwnd变为ssth+3，然后+1+1的发（每一轮rtt+1）

（4）快速恢复：当超过设定时间内没有收到某个报文段的ack时，表示网络拥塞，慢启动阈值ssth变为原来的一半，拥塞窗口cwnd=1，进入慢启动阶段。

30.HTTP和TCP区别和联系？

HTTP是建立在TCP上的应用层协议。当浏览器需要从服务器获取网页数据时，会发出一次HTTP请求，HTTP请求会通过TCP建立一个到服务器的连接通道，当本次请求需要的数据传输完毕后，HTTP会立即将TCP连接断开。

TCP是传输层协议。定义的是数据传输和连接的规范。HTTP是应用层协议，定义的是数据的内容规范。

建立一个TCP请求需要进行三次握手，而由于HTTP是建立在TCP连接上的，建立一个HTTP请求通常需要包含请求和响应两个步骤。

31.HTTP请求方法？GET和POST区别？

GET,POST,PUT,DELETE,TRACE,OPTION,等，POST不是操作幂等性的（即会修改服务器资源）

GET和POST区别：

（1）get不会修改服务器上的资源，它的查询时没有副作用的，而POST会修改服务器资源；

（2）GET可以保存为书签，可以用缓存来优化，而POST不可以；

（3）GET把请求符在URL上，而POST把参数符在HTTP包的包体中（请求体实体）更加安全；

（4）浏览器和服务器一般对GET方法所提交的URL长度有限制，一般时1k或2K，而Post方法传输参数大小限制80K到4M不等；

（5）POST 可传输二进制编码信息，GET参数一般只支持ASCII；

32.HTTP和HTTPS区别？

（1）HTTP是超文本传输协议，信息是明文传输，HTTPS是具有安全性的SSL加密传输协议；

（2）HTTP和HTTPS使用的是完全不同的连接方式，端口号也不一样，HTTP80；HTTPS443；

（3）HTTP的连接简单，无状态的；HTTPS是由SSL+HTTP协议构建的可进行加密传输，身份认证的网络协议，更加安全；

（4）HTTPS需要到CA申请证书，一般免费证书较少，因此需要一定的费用；

33.HTTPS具体实现？如何确保安全性？

HTTPS包括非对称加密和对称加密两个阶段，在客户端与服务器建立连接的时候使用非对称加密，连接建立以后使用的是对称加密。

（1）客户端使用HTTPS的URL访问web服务器，要求与web服务器建立SSL连接；

（2）web服务器收到客户端请求后，会将网站的公钥传送一份给客户端，私钥自己保存；

（3）客户端的浏览器会根据双方同意的安全等级，生成对称加密使用的密钥，称为会话密钥，然后利用网站的公钥将会话密钥加密，并传送给网站；

（4）web服务器利用自己的私钥解密出会话密钥；

（5）web服务器利用会话密钥加密与客户端之间的通信，这个过程是对称加密的过程；

服务器第一次传给客户端的公钥其实是CA对网站信息进行加密的数字证书；客户端的对称加密密钥实际是三个随机数的哈希（1.客户端第一次给服务端发送请求时附带的随机数，2.服务器返回时的随机数，3.客户端收到返回时的随机数）

34.TCP三次握手时的第一次的seq序号是怎么产生的？

第一次的序号是随机序号，但也不是完全随机，它使用一个ISN算法得到。

seq=C+H(源IP地址，目的IP，源端口，目的端口)，其中，C是一个计时器，每隔一段时间值就会变大，H是消息摘要算法，输入是一个四元组（源IP,目的IP，源端口，目的端口）

35.一个机器能够使用的端口号上限是多少？为什么，可以改变吗？若使用的端口超过限制怎么办？

Linux65535，因为TCP报文头部源端口号和目的端口号长度为16位，也就是可以表示2^16=65535个不同的端口号，因此TCP可提供识别端口号最多只有65535个，但是由于0到1023是知名服务端口，所以实际上还要少1024个端口。对于服务器来说，可以开的端口号于65535无关，只是受限于Linux可以打开的文件描述符数量限制，可通过修改内核参数设置，MaxUserPort。

36.对称密码和非对称密码体系？

对称加密：加密和解密的密钥是同一个。

优点：计算量小，算法速度快，加密效率高，缺点：密钥容易泄漏，不同的会话需要不同的密钥，管理起来很费劲。

常用算法：DES,3DES,IDEA,CR4,CR5,CR6,AES

非对称加密：需要公钥和密钥，公钥用来加密，私钥用来解密。

优点：安全，不怕泄漏；缺点：速度慢

常见算法：RSA，ECC，DSA

权威CA使用私钥将网站A的信息和消息摘要（签名S）进行加密打包形成数字证书，公钥给客户端。

网站A将自己的信息和数字证书发给客户端，客户端用CA的公钥对数字证书进行解密，得到签名S，与手动将网站得信息进行消息摘要得到得结果S*进行对比，如果签名一致就证明网站A可以信任。

37.服务器出现大量CLOSE_WAIT的连接原因以及解决方法？

CLOSE_WAIT状态是在TCP四次挥手的时候收到FIN但是没有发送自己的FIN时出现的，服务器出现大量CLOSE_WAIT状态原因有两种：

（1）服务器内部业务处理占用了过多的时间，都没能处理完业务；或者还有数据需要发送；或者服务器的业务逻辑有问题，没有执行close()方法；

（2）服务器的父进程派生出子进程，子进程继承了socket，收到FIN的时候子进程处理但父进程没有处理该信号，导致socket的引用不为0无法回收。

处理方法：（1）停止应用程序；（2）修改程序里的BUG

38.消息摘要算法列举一下，介绍MD5算法，为什么MD5是不可逆的，有什么办法可以加强消息摘要算法额安全性让它不那么容易破解？

消息摘要算法主要有MD家族（MD2,MD4,MD5），SHA家族（SHA-A,SHA-256）和CRC家族（CRC8，CRC16，CRC32）等等。

MD5算法介绍：

MD5以512位分组来处理输入的信息，且每一分组又被划分为若干个小分组（16个32位子分组），经过一系列的处理后，算法输出由四个散列值（32位分组组成的128位散列值）

（1）MD5首先将输入的信息分成若干512字节长度的分组，如果不够就填充1和若干个0；

（2）对每个512字节的分组进行循环运算，使用四个幻数对第一个分组的数据进行四轮变换，得到四个变量；

（3）接下来对其中三个使用线性函数进行计算，与剩下一个相加，并赋值给其中某个变量，得到新的四个变量，重复16次这个过程，得到的四个变量作为幻数，与下一个分组进行相似的计算。

（4）遍历所有分组后得到的四个变量即为结果。

为什么不可逆：因为MD5在进行消息摘要的过程中，数据与原始数据相比发生了丢失，所以不能由结果进行恢复；

加强安全性：加随机数

39.单条记录高并发访问的优化？

服务端：

（1）使用缓存，如redis等；

（2）使用分布式架构进行处理

（3）将静态页面和静态资源存储在静态资源服务器，需要处理的数据使用服务器进行计算后返回；

（4）将静态资源尽可能在客户端进行缓存

（5）采用nginx进行负载均衡（engine X）

数据库端：

（1）数据库采用主从赋值，读写分离措施；

（2）建立适当所以；

（3）数据分表；

40.介绍一下ping的过程，分别用到哪些协议？

ping是使用ICMP协议进行工作，ICMP网络报文控制协议。

首先：ping命令会构建一个ICMP请求数据包，然后由ICMP协议将这个数据包连同目的IP地址源IP地址一起交给IP地址；

然后IP协议就会构建一个IP数据报，并且在映射表中查找目的IP对于地MAC地址，将其交给数据链路层；

然后数据链路层就会构建一个数据帧，附上源MAC地址和目的MAC地址发送出去。

目的主机接收到数据帧后，就会检查包上地MAC地址与本机MAC是否相符，就接收并把其中地信息提取处理交给IP地址，IP协议就会将其中的信息提取出来交给IP协议，IP协议就会将其中的信息提取出来交给ICMP协议，然后构建一个ICMP应答包，用相同的过程发送回去。

41.TCP/IP沾包与避免方法介绍？

因为TCP为了减少额外开销，采取的是流式传输，所以接收端在一次接收的时候可能一次接收多个包。而TCP沾包就是发送方的若干个数据包到达接收方的时候粘成了一个包。多个包首尾相接，无法区分。

导致TCP粘包的原因有三方面：

（1）发送端等待缓冲区慢才进行发送，造成粘包；

（2）接收方来不及接收缓冲区内的数据，造成粘包；

（3）由于TCP协议在发送较小的数据包的时候，会将几个包合成一个包发送。

避免粘包的措施：

（1）通过编程，强制使TCP发生数据传送，不必等到缓冲区满；

（2）优化接收方接收数据的过程，使其来的及接收数据包，包括提高接收进程优先级等；

（3）设置固定长度的报文或者设置报文头部指示的报文长度。

42.说一下TCP的封包和拆包？

因为TCP是无边界的流传输，所以需要对TCP进行封包和拆包，确保发送和接收的数据不粘连。

封包：在发送数据报的时候为每个TCP数据包加上一个包头，将数据包分为包头和包体两个部分，包头是一个固定长度的结构体，里面含有该数据包的总长度。

拆包：接收方在接收到报文后提取包头中的长度信息进行截取。

43.一个IP配置多个域名，靠什么识别？

（1）HOST主机名区别

（2）端口号区分

44.服务器攻击DDOS攻击？

45.DNS工作过程和原理？

两种解析方式：递归查询和迭代查询。

<img src="C:\Users\Ziyuan\AppData\Roaming\Typora\typora-user-images\1598616941244.png" alt="1598616941244" style="zoom:80%;" />

（1）递归查询：用户先向本地域名服务器查询，如果本地域名服务器的缓存没有IP地址映射记录，就向根域名服务器查询，根域名服务器就会像顶级域名服务器查询，顶级域名服务器向权限域名服务器查询，查到结果后依次返回。

（2）迭代查询：用户向本地域名服务器查询，如果没有缓存，本地域名服务器会像根域名服务器查询，根域名服务器返回顶级域名服务器地址，本地域名服务器再向顶级域名服务器查询，得到权限域名服务域名服务器的地址，本地域名服务器再向权限域名服务器查询得到结果。

46.IP寻址和MAC寻址有什么不同，怎么实现的？

通过MAC地址寻找主机是MAC地址寻址，通过IP地址寻找主机叫IP地址。他们适用于不同的协议层，IP寻址是网络层，MAC寻址是数据链路层。

IP寻址过程（ARP协议）：主机A想通过IP地址寻找到目标主机，首先分析IP地址确定目标主机与自己是否为同一网段。如果是则查看ARP缓存，或者使用ARP协议发送广播，若不是，则寻找网关发送ARP数据包。